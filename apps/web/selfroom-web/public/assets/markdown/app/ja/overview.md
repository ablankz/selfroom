### アプリケーション概要

---

#### 作成の意図

- バックエンド側で普段活動しているのをポートフォリオに活かせないかと考えたときに基本的なチャットアプリを作成することにした

#### 使用技術

- `laravel`
  - バックエンドは laravel を使用する
  - 多少ディレクトリ構造は独自のものにアレンジしてる
- `react`(vite)
  - フロントエンドは react を使用
  - 今回は nextJs は使わず、react 単体で行うビルドツールは webpack ではなく高速な vite を使用して開発
- `docker`
  - 開発段階では少なくとも docker を使用
  - 本番環境も今回初めて AWS の ECS を使う予定
- `AWS`
  - ecs(, ec2)以外にも、aws のいろいろなサービスを使用予定
  - ただし、マネージドサービスは費用と相談しながら
- `Pusher`
  - chat に使用するための webSocket は pusher のサービスを利用
- `postgresql`
  - RDB としては今回 postgres を採用(というより他は mysql 以外触ったことない)
- `redis`
  - キーバリュー型の db には redis を使用
- `cron`
  - バッチ処理はcronに登録して自動実行させる 

#### APIアクセスに関する仕様

- APIを直接叩けるように独自で作成したもの
- postmanやswaggerUIで十分だが、定義を簡易的に記述できるため、普段の開発から使うことも多い
- bodyデータは、まだファイルデータや複雑なobjectに対応させていないので簡易的なstringデータのみしか受け付けない

#### 認証に関する仕様

- jwtを使用
- 認証は以下の順番でトークンが見られる
> Authorization ヘッダ (Bearer)\
> -> Request query (‘token’)\
> -> Request body (‘token’)\
> -> Route パラメタ (token)\
> ->Cookie (token)
- アプリケーション自体ではクッキーを使用しているため、フロント側でハンドリングする必要はない
- `Apiアクセス`セクションではそのことに気をつける(headerに書いていればそれが優先されてしまう)
- アカウントの登録はメールアドレスを利用しない簡易的なものにする
- メールの認証確認も行わないため、パスワードリセットなどの機能は作らずユーザーを保持するための最低限のものとして扱う

#### チャットアプリに関する仕様

- 簡易的なチャットアプリ
- チャットの部屋に入れるのは認証済みユーザーのみ
- 部屋を自由に作成してそのルームをユーザーが検索することでその部屋に入ることができる
- パスワード付きの部屋も作成でき、限られたユーザーの入室のみを許可するようにもできる
- 例え部屋を作成したユーザーであっても、その部屋にオーナーは存在せず、部屋の削除権限、名前変更権限を持つユーザーは存在しない
- あくまでチャットのみであり、写真の送信など複雑なリソースのやり取りは目的としないこととする
- ユーザーは一度に一つの部屋にしか入れない
- 部屋のチャット履歴は後から入室したユーザーでも見ることができる
- トークは一週間経つと自動的に削除される
- 部屋が削除されるとその部屋のトーク履歴は閲覧不可となる
- 部屋に誰もいなくなってから1ヶ月経つと、その部屋は自動的に削除される
- 上記でない場合でも最後にユーザーが発言してから3ヶ月経つと、その部屋は自動的に削除される

<br>

### 参考

---

- [Minimal - Client and Admin Dashboard](https://minimals.cc/)
  - フロントエンドはあまり得意ではない（というよりロジックの方は好きですがデザインが...）ため、普段から個人の web 開発をするときは、テンプレートなどを購入などしてそれをもとにアプリケーションを作成しています
  - 今回も[mui template](https://mui.com/store/items/minimal-dashboard/)を元にデザイン自体は構成しています
  - セクションごとの中身はある程度、自分でコーディングしていますが、多少、デザインがいまいちなところは多めに見ていただきたいです 🙏


